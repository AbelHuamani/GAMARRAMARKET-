/* Crear tabla PERSONA */
CREATE TABLE PERSONA
(
   IDPER INT GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH 200 INCREMENT BY 1,
   DNIPER CHAR(8),
   NOMPER VARCHAR2(60),
   APEPER VARCHAR2(80),
   EMAPER VARCHAR2(80),
   CELPER CHAR(9),
   TIPPER CHAR(1),
   ESTPER CHAR(1) DEFAULT 'A',
   FECNACPER DATE,
   CONSTRAINT PERSONA_PK PRIMARY KEY (IDPER)       
);

INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('77889955' ,'Alberto','Solano Pariona','alberto.pariona@empresa.com','99845632','V','10/02/1970');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('45781233' ,'Alicia','Garcia Campos','','','C','20/03/1980');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('15487922' ,'Juana','Ávila Chumpitaz','juana.avila@gmail.com','923568741','C','06/06/1986');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('22116633' ,'Ana','Enriquez Flores','ana.enriquez@empresa.com','','V','10/02/1970');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('88741589' ,'Claudia','Perales Ortiz','claudia.perales@vahoo.com','997845263','C','25/07/1981');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('45122587' ,'Mario','Barrios Martinez','mario.barrios@outlook.com','986525870','C','10/10/1987');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('15258564' ,'Brunela','Tarazona Guerra','brunela.tarazona@gmail.com','995236741','C','06/06/1990');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('47142536' ,'Alejandro','Jimenez Huapaya','','941525365','C','01/06/1989');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('15352585' ,'Claudia','Marquez Litano','claudia.marquez@gmail.com','985814723','C','01/10/1991');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('45772587' ,'Mario','Rodriguez Mayo','mario.rodriguez@outlook.com','912662587','C','10/11/1987');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('87952514' ,'Luisa','Guerra Ibarra','luisa.guerra@yahoo.com','974422136','C','21/12/1988');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('74142585' ,'Pedro Alberto','Candela Valenzuela','pedro.candela@gmail.com','94148525','C','30/06/1995');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('53298147' ,'Angel Manuel','Rojas Avila','angel.rojas@outlook.com','','C','02/03/1975');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('11453265' ,'Hilario Fabiano','Avila Huapaya','','985514326','C','02/05/2000');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('75747218' ,'Octavio Adan','Marquez Osorio','octavio.marquez@yahoo.es','966223141','C','22/09/2000');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('55869321' ,'Manolo Enrique','Vasquez Saravia','manolo.vasquez@outlook.es','966223141','C','22/09/2000');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('41552567' ,'Genoveva Pilar','Ortiz Quispe','genoveva.ortiz@outlook.es','925641370','C','12/04/2003');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('49985471' ,'Oscar César','Quiroz Zavala','','988223145','C','12/10/2004');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('44992217' ,'Verónica','Romero Vargas','veronica.romero@yahoo.com','','C','25/08/2002');

/* Crear tabla VENTA */
CREATE TABLE VENTA
(
   IDVEN INT GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH 1 INCREMENT BY 1,
   FECVEN DATE,
   IDVEND INT,
   IDPER INT,
   TIPPAGVEN CHAR(1),
   ESTVEN CHAR(1) DEFAULT 'A',
   CONSTRAINT VENTA_PK PRIMARY KEY (IDVEN)       
);

INSERT INTO VENTA (FECVEN ,IDVEND ,IDPER  ,TIPPAGVEN)
VALUES            ('25/04/2023' ,'200','202','E');
INSERT INTO VENTA (FECVEN ,IDVEND ,IDPER ,TIPPAGVEN)
VALUES            ('25/04/2023' ,'200','204','T');
INSERT INTO VENTA (FECVEN ,IDVEND ,IDPER  ,TIPPAGVEN)
VALUES            ('25/04/2023' ,'203','205','T');
INSERT INTO VENTA (FECVEN ,IDVEND ,IDPER ,TIPPAGVEN)
VALUES            ('25/04/2023' ,'203','206','E');


/* Crear tabla VENTA_DETALLE */
CREATE TABLE VENTA_DETALLE
(
   IDVENDET INT GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH 300 INCREMENT BY 1,
   IDVEN INT,
   CODPROD CHAR(3),
   CANVENDET INT,
   ESTVEN CHAR(1) DEFAULT 'A',
   CONSTRAINT VENTA_DETALLE_PK PRIMARY KEY (IDVENDET)       
);

INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('1' ,'P01','2');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('1' ,'P04','4');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('2' ,'P06','12');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('2' ,'P08','6');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('2' ,'P11','16');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('3' ,'P15','8');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('4' ,'P09','5');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('4' ,'P14','13');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('4' ,'P20','10');
INSERT INTO VENTA_DETALLE (IDVEN ,CODPROD ,CANVENDET )
VALUES                    ('4' ,'P21','13');

/* Crear tabla PRODUCTO */
CREATE TABLE PRODUCTO
(
   CODPROD CHAR(3),
   NOMPRO VARCHAR2(50),
   PREPRO NUMBER(8,2), 
   STOCKPRO INT,
   IDCAT INT,
   ESTPRO CHAR(1) DEFAULT 'A',
   CONSTRAINT PRODUCTO_PK PRIMARY KEY (CODPROD)       
);

INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P01','Arroz','4,65','50','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P02','Azúcar','3,45','60','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P03','Pollo fresco','8,7','20','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P04','Lomo fino','18,5','40','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P05','Detergente Opal','8,75','60','30');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P06','Suavizante Ariel','7,85','30','30');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P07','Six pack cerveza en lata','19,85','150','40');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P08','Pack Johnnie Walker Black','119,75','150','40');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P09','Ron Barceló gran añejo','68,95','150','40');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P10','Filete de pechuga','25,55','50','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P11','Deditos de pechuga de pollo','12,75','120','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P12','Hamburguesa premium parrillera','28,75','150','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P13','Nugget de pollo','10,9','100','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P14','Tiras de pechuga de pollo','13,5','250','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P15','Galletas Oreo','6,88','50','50');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P16','Galleta Choco Donuts','4,9','90','50');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P17','Huevo de pascua','3,4','70','50');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P18','Bombones de chocolate','35,9','100','50');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P19','Detergente en polvo opal 6KG.','50,25','250','30');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P20','Detergente Marsella Aromaterapia 4KG.','46,1','150','30');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P21','Detergente líquido aroma bebé 5L','83,85','200','30');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P22','Jabón para lavar Caricia 200G.','7,75','90','30');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P23','Lejia tradicional 18KG','24,75','200','30');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P24','Jabón para lavar - Bolívar','6,8','100','30');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P25','Pack de menestras de lenteja','14,5','120','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P26','Mayonesa Alacena 850GR.','16,9','90','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P27','Aceite de oliva extra virgen','32,5','145','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P28','Fideos tallarin 500G','3,9','45','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P29','Crema de avellanas con cacao','7,8','200','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P30','Harina de trigo sin preparar','8,1','100','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P31','Maicena Universal 180GR','2,9','85','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P32','Harina de maíz blanco','10,5','100','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P33','Leche condensada nestlé','6,2','135','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P34','Duraznos en almibar','13,6','180','10');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P35','Chicharrón de cerdo','29,5','165','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P36','Apanado de pollo','37,95','130','20');
INSERT INTO PRODUCTO (CODPROD,NOMPRO,PREPRO,STOCKPRO,IDCAT)
VALUES              ('P37','Sopa de carne','9,6','170','20');

/* Crear tabla CATEGORIA */
CREATE TABLE CATEGORIA
(
   IDCAT INT GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH 10 INCREMENT BY 10,
   NOMCAT VARCHAR2(60),
   CONSTRAINT CATEGORIA_PK PRIMARY KEY (IDCAT)
);


INSERT INTO CATEGORIA (NOMCAT)
VALUES              ('Abarrotes');
INSERT INTO CATEGORIA (NOMCAT )
VALUES              ('Carnes y Pollo');
INSERT INTO CATEGORIA (NOMCAT )
VALUES              ('Higiene y Limpieza');
INSERT INTO CATEGORIA (NOMCAT )
VALUES              ('Bebidas y licores');
INSERT INTO CATEGORIA (NOMCAT )
VALUES              ('Dulces y snacks');
INSERT INTO CATEGORIA (NOMCAT )
VALUES              ('Electrodomésticos');

-- Reference VENTA_PERSONA
ALTER TABLE VENTA ADD CONSTRAINT VENTA_PERSONA
    FOREIGN KEY (IDPER)
    REFERENCES PERSONA (IDPER);

-- Reference: Venta_detalle_VENTA (table: VENTA_DETALLE)
ALTER TABLE VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_VENTA
    FOREIGN KEY (IDVEN)
    REFERENCES VENTA (IDVEN);

-- Reference: Venta_detalle_producto (table: VENTA_DETALLE)
ALTER TABLE VENTA_DETALLE ADD CONSTRAINT Venta_detalle_PRODUCTO
    FOREIGN KEY (CODPROD)
    REFERENCES PRODUCTO (CODPROD);
    
-- Reference: PRODUCTO_CATEGORIA (table: producto)
ALTER TABLE PRODUCTO ADD CONSTRAINT PRODUCTO_CATEGORIA
    FOREIGN KEY (IDCAT)
    REFERENCES CATEGORIA (IDCAT);

--9 Actualizar el número 
UPDATE PERSONA 
SET CELPER = '922881101'
WHERE TIPPER = 'C' and IDPER = 209;

SELECT * FROM PERSONA
where idper in (209);

--10 cuenta con número de celular 
UPDATE PERSONA 
SET CELPER = '977226604'
WHERE TIPPER = 'C' and IDPER = 212;

SELECT * FROM PERSONA
where idper in (212);

--11 Eliminar lógicamente los clientes
UPDATE PERSONA 
SET ESTPER = 'I' 
WHERE DNIPER IN (11453265, 15487922, 49985471);

SELECT * FROM PERSONA
where idper in (202,213,217);

--12 han perdido su celular por tanto debe estar en blanco.
UPDATE PERSONA 
SET CELPER = '' 
WHERE idper IN (210,211,215);

SELECT * FROM PERSONA
where idper in (210,211,215);

--13 debemos actualizar su nuevo correo
UPDATE PERSONA 
SET EMAPER = 'oscar.quiroz@yahoo.es'
WHERE idper IN (217);

UPDATE PERSONA 
SET ESTPER = 'A'
WHERE idper IN (217);

SELECT * FROM PERSONA
where idper in (217);

--14 Agregar los datos de los siguientes clientes y vendedor.
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('88225463' ,'Gustavo Tadeo','Quispe Solorzano','gustavo.quispe@gmail.com','','V','13/10/2001');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('15753595' ,'Daniela','Solis Vargas','daniela.soliz@outlook.com','','C','09/11/1993');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('76314895' ,'Miltón Gregorio','Vásquez Iturrizaga','milton.gregorio@yahoo.es','974815233','C','22/06/2004');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('84725001' ,'Verónica','Ancajima Araujo','veronica.ancajima@yahoo.com','','C','07/11/1980');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('11228514' ,'Felicita','Marroquin Candela','felicita.marroquin@outlook.com','966001472','V','06/06/2006');
INSERT INTO PERSONA (DNIPER ,NOMPER ,APEPER ,EMAPER ,CELPER ,TIPPER,FECNACPER)
VALUES              ('51436952' ,'Luhana','Ortiz Rodríguez','luhana.ortiz@outlook.com','960405017','C','25/11/1980');

SELECT * FROM PERSONA
where idper in (219,220,221,222,223,224);

--15 Actualizar el precio de la Maicena
UPDATE PRODUCTO 
SET PREPRO = '3,5'
WHERE STOCKPRO IN (85);

SELECT * FROM PRODUCTO
WHERE STOCKPRO IN (85);

--16 Actualizar producto 
UPDATE PRODUCTO 
SET NOMPRO = 'Detergente Opal 1/2Kg'
WHERE STOCKPRO IN (60);

SELECT * FROM PRODUCTO
WHERE STOCKPRO IN (60);



SELECT * FROM CATEGORIA;
SELECT * FROM PRODUCTO;
SELECT * FROM VENTA_DETALLE;
SELECT * FROM VENTA;
SELECT * FROM PERSONA;
    
    
    